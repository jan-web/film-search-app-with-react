(this["webpackJsonponline-cinema"]=this["webpackJsonponline-cinema"]||[]).push([[0],[,,,,,,,,,,,,,,,function(e,t,a){},function(e,t,a){},,function(e,t,a){},function(e,t,a){},function(e,t,a){},,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var s=a(2),n=a(9),r=a.n(n),c=(a(15),a(16),a(1)),i=a.n(c),o=a(4),l=a(3),d=a(5),u=a(7),h=a(6),p=(a(18),a(19),function e(){var t=this;Object(l.a)(this,e),this.API_KEY="93893642d4fb10181dd30bc34cb00565",this.API_SERVER="https://api.themoviedb.org/3",this.getData=function(){var e=Object(o.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:if(!(a=e.sent).ok){e.next=7;break}return e.abrupt("return",a.json());case 7:throw Error("Have not received data from ".concat(t));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.showHideSpinner=function(e){var t=document.querySelector(".tv-shows"),a=document.querySelector(".loading");if(t)switch(e){case"show":t.style.display="none",a.style.display="block";break;case"hide":t.style.display="block",a.style.display="none"}},this.getSearchResult=function(){var e=Object(o.a)(i.a.mark((function e(a){var s,n,r=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=r.length>1&&void 0!==r[1]?r[1]:1,t.showHideSpinner("show"),e.next=4,t.getData("".concat(t.API_SERVER,"/search/movie?api_key=").concat(t.API_KEY,"&query=").concat(a,"&language=en-US&page=").concat(s,"&include_adult=false"));case 4:return n=e.sent,t.showHideSpinner("hide"),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getRatedAndNew=function(){var e=Object(o.a)(i.a.mark((function e(a,s){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.showHideSpinner("show"),e.next=3,t.getData("".concat(t.API_SERVER,"/movie/").concat(a,"?api_key=").concat(t.API_KEY,"&language=en-US&page=").concat(s));case 3:return n=e.sent,t.showHideSpinner("hide"),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),this.getFilmInfo=function(){var e=Object(o.a)(i.a.mark((function e(a){var s,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(s=document.querySelector(".preloader")).style.display="flex",e.next=4,t.getData("".concat(t.API_SERVER,"/movie/").concat(a,"?api_key=").concat(t.API_KEY,"&language=en-US"));case 4:return n=e.sent,s.style.display="none",e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),j=(a(20),a(0)),m=function(e){var t=e.onGetRatedAndNew,a=function(e){document.querySelector(".left-menu").classList.remove("openMenu"),document.querySelector(".hamburger").classList.remove("open"),document.querySelectorAll(".dropdown").forEach((function(e){return e.classList.remove("active")})),t(e)};return Object(j.jsxs)("div",{className:"left-menu",onClick:function(e){var t=e.target.closest(".dropdown");t&&(t.classList.toggle("active"),document.querySelector(".left-menu").classList.add("openMenu"),document.querySelector(".hamburger").classList.add("open"))},children:[Object(j.jsxs)("div",{className:"hamburger active",onClick:function(){document.querySelector(".left-menu").classList.toggle("openMenu"),document.querySelector(".hamburger").classList.toggle("open"),document.addEventListener("click",(function(e){e.target.closest(".left-menu")||(document.querySelector(".left-menu").classList.remove("openMenu"),document.querySelector(".hamburger").classList.remove("open"),document.querySelectorAll(".dropdown").forEach((function(e){return e.classList.remove("active")})))}))},children:[Object(j.jsx)("span",{}),Object(j.jsx)("span",{}),Object(j.jsx)("span",{})]}),Object(j.jsxs)("ul",{className:"left-menu__list",children:[Object(j.jsxs)("li",{children:[Object(j.jsxs)("a",{href:"#1",className:"dropdown",children:[Object(j.jsx)("img",{className:"menu__icon",src:"./media/images/star.svg",alt:"raiting"}),Object(j.jsx)("span",{children:"Ratings"})]}),Object(j.jsxs)("ul",{className:"dropdown-list",children:[Object(j.jsx)("li",{onClick:function(){return a("top_rated")},children:Object(j.jsx)("a",{href:"#1",id:"top-rated",children:Object(j.jsx)("span",{children:"Top rated movies"})})}),Object(j.jsx)("li",{onClick:function(){return a("popular")},children:Object(j.jsx)("a",{href:"#1",id:"popular",children:Object(j.jsx)("span",{children:"Popular"})})})]})]}),Object(j.jsxs)("li",{children:[Object(j.jsxs)("a",{href:"#1",className:"dropdown",children:[Object(j.jsx)("img",{className:"menu__icon",src:"./media/images/laptop.svg",alt:"raiting"}),Object(j.jsx)("span",{children:"New and Upcoming"})]}),Object(j.jsxs)("ul",{className:"dropdown-list",children:[Object(j.jsx)("li",{onClick:function(){return a("upcoming")},children:Object(j.jsx)("a",{href:"#1",id:"upcoming",children:Object(j.jsx)("span",{children:"Upcoming movies in theatres"})})}),Object(j.jsx)("li",{onClick:function(){return a("now_playing")},children:Object(j.jsx)("a",{href:"#1",id:"now",children:Object(j.jsx)("span",{children:"Now playing in theatres"})})})]})]})]})]})},b=a(10),g=(a(22),a(23),function(e){var t=e.dbase,a=e.toggleModal;if(t){var s=function(e){var t=e.target.closest(".card-img-top");if(t&&t.dataset.backdrop){var a=[t.src,t.dataset.backdrop];t.dataset.backdrop=a[0],t.src=a[1]}},n=t.map((function(e){var t=e.poster_path?"https://image.tmdb.org/t/p/w185_and_h278_bestv2/"+e.poster_path:"./media/images/noposter.jpg",n=e.poster_path?t:"./media/images/noposter.jpg",r=e.backdrop_path?"https://image.tmdb.org/t/p/w185_and_h278_bestv2/"+e.backdrop_path:n;return Object(j.jsx)("li",{className:"tv-shows__item mb-3",children:Object(j.jsxs)("a",{href:"#1",className:"tv-card",onClick:function(){return a(e.id)},children:[Object(j.jsxs)("div",{className:"card",style:{width:"13rem"},children:[Object(j.jsx)("img",{className:"card-img-top",src:t,"data-backdrop":r,alt:e.original_title,onMouseOver:s,onMouseLeave:s}),Object(j.jsx)("div",{className:"card-body",children:Object(j.jsx)("h6",{className:"card-title m-0",children:e.title.length>18?e.title.substring(0,18)+"...":e.title})})]}),e.vote_average?Object(j.jsx)("span",{className:"tv-card__vote",children:e.vote_average}):""]})},e.id)}));return Object(j.jsx)("ul",{className:"tv-shows__list",children:n})}return!0}),f=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(l.a)(this,a);for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))).getMainTitle=function(){return e.props.dbase&&e.props.dbase.length>0?e.props.searchStatus:"Nothing have been found"},e.onChangeSelect=function(t){e.props.setCurrentPage(t.target.selectedIndex),t.target.selectedIndex=null},e}return Object(d.a)(a,[{key:"getPaginationLayot",value:function(){var e=this;return!this.props.getTotalPages||this.props.getTotalPages<2?void 0:Object(j.jsx)("nav",{"aria-label":"navigation",children:Object(j.jsxs)("ul",{className:"pagination justify-content-center mb-5",children:[Object(j.jsx)("li",{className:1===this.props.getCurrentPage()?"page-item disabled":"page-item",children:Object(j.jsx)("button",{className:"page-link main__arrow-button","aria-label":"Previous",onClick:function(){return e.props.setCurrentPage(e.props.getCurrentPage()-1)},children:Object(j.jsx)("span",{"aria-hidden":"true",children:"\xab"})})}),Object(j.jsx)("li",{className:"page-item main__select-wrapper",children:Object(j.jsxs)("select",{className:"form-select main__select-pages","aria-label":"Default select example",onChange:function(t){return e.onChangeSelect(t)},children:[Object(j.jsxs)("option",{defaultValue:!0,children:["Page ",this.props.getCurrentPage()," of"," ",this.props.getTotalPages()]}),Object(b.a)(Array(this.props.getTotalPages())).map((function(e,t){return t+1})).map((function(e){return Object(j.jsx)("option",{value:e,children:e},e)}))]})}),Object(j.jsx)("li",{className:this.props.getCurrentPage()===this.props.getTotalPages()?"page-item disabled":"page-item",children:Object(j.jsx)("button",{className:"page-link main__arrow-button",href:"#","aria-label":"Next",onClick:function(){return e.props.setCurrentPage(e.props.getCurrentPage()+1)},children:Object(j.jsx)("span",{"aria-hidden":"true",children:"\xbb"})})})]})})}},{key:"changeSearchStatus",value:function(){return this.setState({searchStatus:this.props.searchStatus}),this.state.searchStatus}},{key:"render",value:function(){return Object(j.jsx)("main",{children:Object(j.jsx)("div",{className:"container",children:Object(j.jsxs)("section",{className:"tv-shows",children:[Object(j.jsx)("h3",{className:"tv-shows__head",children:this.getMainTitle()}),Object(j.jsx)(g,{dbase:this.props.dbase,toggleModal:this.props.toggleModal}),this.getPaginationLayot()]})})})}}]),a}(s.Component),v=(a(24),function(e){var t,a=e.toggleModal,s=e.modalData,n=s.poster_path,r=s.genres,c=s.title,i=s.vote_average,o=s.overview,l=s.homepage;t=n?"https://image.tmdb.org/t/p/w185_and_h278_bestv2/"+n:"./media/images/noposter.jpg";return Object(j.jsxs)("div",{className:"modal hide",children:[Object(j.jsxs)("div",{className:"modal__content",children:[Object(j.jsx)("div",{className:"card border-0",style:{maxWidth:"540px"},children:Object(j.jsxs)("div",{className:"row g-0",children:[Object(j.jsx)("div",{className:"col-md-4 ",children:Object(j.jsx)("img",{className:"img-fluid rounded-start",src:t,alt:c})}),Object(j.jsx)("div",{className:"col-md-8",children:Object(j.jsxs)("div",{className:"card-body",style:{paddingLeft:"25px",paddingTop:"0px"},children:[Object(j.jsx)("h3",{className:"card-title",children:c}),Object(j.jsx)("section",{className:"genres",children:Object(j.jsxs)("h5",{children:["Genres: ",function(){if(r)return r.map((function(e){return Object(j.jsxs)("small",{children:[e.name,"\xa0"]},e.name)}))}()]})}),Object(j.jsx)("section",{children:Object(j.jsxs)("h5",{children:["Raiting: ",Object(j.jsx)("span",{className:"rating",children:i})]})}),Object(j.jsx)("p",{className:"card-text mb-2",children:o}),Object(j.jsxs)("p",{className:"card-text",children:[" ",l?Object(j.jsx)("a",{className:"card-text modal__link",href:l||"#",target:"_blanc",children:Object(j.jsx)("b",{children:Object(j.jsx)("i",{children:l})})}):"no website for this movie"," "]})]})})]})}),Object(j.jsxs)("div",{className:"cross",onClick:a,children:[Object(j.jsx)("span",{}),Object(j.jsx)("span",{})]})]})," "]})}),x=(a(25),function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(l.a)(this,a);for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))).state={term:"",searchStatus:e.props.searchStatus},e.onSearchChange=function(t){var a=t.target.value;0!==a.trim().length?(e.setState({term:a}),e.props.onSearchChange(a)):(e.setState({term:""}),e.props.onSearchChange(""))},e}return Object(d.a)(a,[{key:"render",value:function(){return Object(j.jsx)("header",{children:Object(j.jsxs)("div",{className:"container header-flex",children:[Object(j.jsxs)("hgroup",{className:"title-wrapper",children:[Object(j.jsx)("h1",{className:"title",children:"Popular"}),Object(j.jsx)("h2",{className:"subtitle",children:"films searcher"})]}),Object(j.jsx)("section",{className:"search",children:Object(j.jsxs)("form",{className:"search__form",children:[Object(j.jsx)("h2",{className:"search__form-head",children:"Search"}),Object(j.jsx)("label",{className:"search__form-block",children:Object(j.jsx)("input",{type:"text",name:"searchText",className:"search__form-input",autoComplete:"off",id:"searchText",placeholder:"Write the title of the movie (or part of the title)...",value:"Search results"===this.state.searchStatus()?this.state.term:"",onChange:this.onSearchChange})})]})})]})})}}]),a}(s.Component)),O=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this)).dbService=new p,e.state={dbase:null,modalData:{},term:"",searchStatus:"Search results",total_pages:0,current_page:1},e.toggleModal=function(){var t=Object(o.a)(i.a.mark((function t(a){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("click"===a.type){t.next=5;break}return t.next=3,e.getFilmInfo(a);case 3:t.next=6;break;case 5:e.hideAndShowModal();case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.hideAndShowModal=function(){document.querySelector(".modal").classList.contains("hide")?(document.querySelector(".modal").classList.remove("hide"),document.body.style.overflow="hidden"):(document.querySelector(".modal").classList.add("hide"),document.body.style.overflow="")},e.documentListener=function(){document.addEventListener("click",(function(e){e.target.classList.contains("modal")&&(document.querySelector(".modal").classList.add("hide"),document.body.style.overflow="")}))},e.hideOldCards=function(){document.querySelector(".tv-shows").style.display="none"},e.showOldCards=function(){document.querySelector(".tv-shows").style.display="block"},e.onGetRatedAndNew=function(t){e.getRatedAndNew(t)},e.getSearchStatus=function(){return e.state.searchStatus},e.getTotalPages=function(){return e.state.total_pages},e.onSearchChange=function(t){t!==e.state.term&&e.setState({current_page:1}),e.setState({term:t}),e.setState({searchStatus:"Search results"}),e.updateBase(t)},e.setCurrentPage=function(t){switch(e.setState({current_page:t}),e.state.searchStatus){case"Search results":e.updateBase(e.state.term,t);break;case"Top rated movies":e.getRatedAndNew("top_rated",t);break;case"Popular":e.getRatedAndNew("popular",t);break;case"Upcoming movies in theatres":e.getRatedAndNew("upcoming",t);break;case"Now playing in theatres":e.getRatedAndNew("now_playing",t)}},e.getCurrentPage=function(){return e.state.current_page},e.updateBase(),e.documentListener(),e}return Object(d.a)(a,[{key:"updateBase",value:function(e,t){var a=this;this.state.dbase&&e?this.dbService.getSearchResult(e,t).then((function(e){return a.hideOldCards(),e})).then((function(e){a.setState({dbase:e.results,total_pages:e.total_pages})})).then((function(){a.showOldCards()})):this.onGetRatedAndNew("upcoming")}},{key:"getRatedAndNew",value:function(e,t){var a=this,s=t;t||(t=1),this.dbService.getRatedAndNew(e,t).then((function(t){s||a.setState({current_page:1}),a.setState({total_pages:t.total_pages}),a.hideOldCards();var n="";switch(e){case"top_rated":n="Top rated movies";break;case"popular":n="Popular";break;case"upcoming":n="Upcoming movies in theatres";break;case"now_playing":n="Now playing in theatres"}return a.setState({searchStatus:n}),t})).then((function(e){a.setState({dbase:e.results})})).then((function(){a.showOldCards()}))}},{key:"getFilmInfo",value:function(e){var t=this;this.dbService.getFilmInfo(e).then((function(e){t.setState({modalData:e})})).then((function(){t.hideAndShowModal()}))}},{key:"getDataForModal",value:function(){return this.state.modalData}},{key:"render",value:function(){var e=this.state.dbase,t=this.state.searchStatus;return Object(j.jsxs)("div",{children:[Object(j.jsx)(m,{onGetRatedAndNew:this.onGetRatedAndNew}),Object(j.jsx)(x,{onSearchChange:this.onSearchChange,searchStatus:this.getSearchStatus}),Object(j.jsx)(f,{dbase:e,searchStatus:t,toggleModal:this.toggleModal,getTotalPages:this.getTotalPages,setCurrentPage:this.setCurrentPage,getCurrentPage:this.getCurrentPage}),Object(j.jsx)(v,{toggleModal:this.toggleModal,modalData:this.getDataForModal()}),Object(j.jsx)("div",{className:"loading",children:Object(j.jsxs)("div",{className:" loader",children:[Object(j.jsx)("div",{className:"loader--dot"}),Object(j.jsx)("div",{className:"loader--dot"}),Object(j.jsx)("div",{className:"loader--dot"}),Object(j.jsx)("div",{className:"loader--dot"}),Object(j.jsx)("div",{className:"loader--dot"}),Object(j.jsx)("div",{className:"loader--dot"}),Object(j.jsx)("div",{className:"loader--text"})]})}),Object(j.jsx)("div",{className:"preloader box",children:Object(j.jsxs)("div",{className:"cat",children:[Object(j.jsx)("div",{className:"cat__body"}),Object(j.jsx)("div",{className:"cat__body"}),Object(j.jsx)("div",{className:"cat__tail"}),Object(j.jsx)("div",{className:"cat__head"})]})})]})}}]),a}(s.Component);r.a.render(Object(j.jsx)(O,{}),document.getElementById("root"))}],[[26,1,2]]]);
//# sourceMappingURL=main.6fe99b89.chunk.js.map